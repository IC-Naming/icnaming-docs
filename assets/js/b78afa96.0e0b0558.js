"use strict";(self.webpackChunkicnaming_docs=self.webpackChunkicnaming_docs||[]).push([[259],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(r),m=a,g=d["".concat(s,".").concat(m)]||d[m]||u[m]||l;return r?n.createElement(g,o(o({ref:t},p),{},{components:r})):n.createElement(g,o({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3236:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const l={sidebar_position:1},o="Canister To Go",i={unversionedId:"TechnicalReference/CanistersToGo",id:"TechnicalReference/CanistersToGo",title:"Canister To Go",description:"There are some canisters that are used by IC Naming to manage names. In this post we go through some simple scenarios to",source:"@site/docs/TechnicalReference/CanistersToGo.md",sourceDirName:"TechnicalReference",slug:"/TechnicalReference/CanistersToGo",permalink:"/TechnicalReference/CanistersToGo",draft:!1,editUrl:"https://github.com/IC-Naming/icnaming-docs/blob/main/docs/TechnicalReference/CanistersToGo.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Glossary",permalink:"/Concepts/ProtocolOverview/Glossary"},next:{title:"Canister DID",permalink:"/TechnicalReference/Canister"}},s={},c=[{value:"Registering a Name",id:"registering-a-name",level:2},{value:"Register with Quota",id:"register-with-quota",level:3},{value:"Register with Payment",id:"register-with-payment",level:3},{value:"Resolving a Name",id:"resolving-a-name",level:2},{value:"Updating a Resolving Record",id:"updating-a-resolving-record",level:2},{value:"Delete a Resolving Record",id:"delete-a-resolving-record",level:2}],p={toc:c};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"canister-to-go"},"Canister To Go"),(0,a.kt)("p",null,"There are some canisters that are used by IC Naming to manage names. In this post we go through some simple scenarios to\nunderstand how to perform business operations through their API."),(0,a.kt)("h2",{id:"registering-a-name"},"Registering a Name"),(0,a.kt)("p",null,'I want to register a name like "hello.ic".'),(0,a.kt)("p",null,"Canister related:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Registrar")),(0,a.kt)("h3",{id:"register-with-quota"},"Register with Quota"),(0,a.kt)("p",null,"You can register a name by calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"register_xxx")," methods on the Registrar."),(0,a.kt)("p",null,"For example, if you have a quota of LenEq(5) and you want to register a name of length 5, you can\ncall ",(0,a.kt)("inlineCode",{parentName:"p"},"register_with_quota")," on the Registrar:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dfx canister call registrar register_with_quota '(\"hello.ic\", variant { LenEq = 5 })'\n")),(0,a.kt)("p",null,'Eventually, you will get "hello.ic" registered.'),(0,a.kt)("h3",{id:"register-with-payment"},"Register with Payment"),(0,a.kt)("p",null,"You can register a name by pay DICP for it. DICP is a token that wrapped ICP into a DFT standard, see more at ",(0,a.kt)("a",{parentName:"p",href:"DICP"},"DICP"),"."),(0,a.kt)("p",null,'For example, if you want to register "hello.ic" with payment of 1 DICP for 5 years.'),(0,a.kt)("p",null,"Just like ERC20, before you calling registrar to register the name, you need to call DICP canister to approve the payment."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dfx canister call dicp approve '([], \"${registar_canister_id}\" , 100000000:nat, [])'\n")),(0,a.kt)("p",null,"Then, you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"register_with_payment")," on the Registrar:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'dfx canister call registrar register_with_payment "(record {name = \\"hello.ic\\", approve_amount = 100000000:nat, years = 5:nat32})"\n')),(0,a.kt)("p",null,'Eventually, you will get "hello.ic" registered.'),(0,a.kt)("p",null,"Q: How can I know how much should I pay?"),(0,a.kt)("p",null,"A: Please checkout the result of ",(0,a.kt)("inlineCode",{parentName:"p"},"get_price_table")," on the Registrar."),(0,a.kt)("h2",{id:"resolving-a-name"},"Resolving a Name"),(0,a.kt)("p",null,'I want to resolve ICP address for a name like "hello.ic".'),(0,a.kt)("p",null,"Canister related:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Registry"),(0,a.kt)("li",{parentName:"ul"},"Resolver")),(0,a.kt)("p",null,"First, you need to get resolver of the name, then you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"get_resolver")," method on the Registry:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'dfx canister call registry get_resolver "(\\"hello.ic\\")"\n')),(0,a.kt)("p",null,"Then you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"get_record_value")," method on the Resolver:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'dfx canister call "resolver canister id from above" get_record_value "(\\"hello.ic\\")"\n')),(0,a.kt)("p",null,"Then you can get all values from result and find the value with key ",(0,a.kt)("inlineCode",{parentName:"p"},"principal.icp"),"."),(0,a.kt)("p",null,"You can find more keys from ",(0,a.kt)("a",{parentName:"p",href:"ResolverKeys"},"Resolver Keys"),"."),(0,a.kt)("h2",{id:"updating-a-resolving-record"},"Updating a Resolving Record"),(0,a.kt)("p",null,'I want to update the resolving record for a name like "hello.ic" with key ',(0,a.kt)("inlineCode",{parentName:"p"},"principal.icp"),' to "0x12345678".'),(0,a.kt)("p",null,"Canister related:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Registry"),(0,a.kt)("li",{parentName:"ul"},"Resolver")),(0,a.kt)("p",null,"First, you need to get resolver of the name, then you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"get_resolver")," method on the Registry:"),(0,a.kt)("p",null,"Then you can call ",(0,a.kt)("inlineCode",{parentName:"p"},"set_record_value")," method on the Resolver:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'dfx canister call resolver set_record_value \'("hello.ic", vec { record {"principal.icp"; "0x12345678"} })\'\n')),(0,a.kt)("p",null,"Then everything is done."),(0,a.kt)("h2",{id:"delete-a-resolving-record"},"Delete a Resolving Record"),(0,a.kt)("p",null,"I want to delete value of ",(0,a.kt)("inlineCode",{parentName:"p"},"principal.icp"),' for a name like "hello.ic".'),(0,a.kt)("p",null,"You can do as ",(0,a.kt)("a",{parentName:"p",href:"#updating-a-resolving-record"},"Updating")," by sending an empty value with key ",(0,a.kt)("inlineCode",{parentName:"p"},"principal.icp"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'dfx canister call resolver set_record_value \'("hello.ic", vec { record {"principal.icp"; ""} })\'\n')))}u.isMDXComponent=!0}}]);